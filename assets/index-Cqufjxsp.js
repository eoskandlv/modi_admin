import{r as o,j as e}from"./react-BE0_VlQY.js";import{c as Se}from"./react-dom-D7lfMb4l.js";import{L as A,B as ke}from"./react-router-dom-CxOsFh4I.js";import{F as Ee,a as Oe,I as Te,b as Le}from"./react-icons-D6DDPfRq.js";import{u as se,a as te,P as Ae}from"./react-redux-C8xW7nCD.js";import{c as Ie,a as De}from"./@reduxjs-DYPsSoVN.js";import{b as me,a as T,d as Fe,e as Pe,f as qe,g as k}from"./react-router-CpjZnjLa.js";import{A as ae}from"./aos-BIgLaLB-.js";import{i as z,g as J,a as xe,b as pe,c as re,d as Me,e as ue,f as Re,u as Ve,h as Ge,s as Ue}from"./@firebase-B8ec8q5P.js";import"./firebase-8VrNqdBc.js";import{u as W,C as ze}from"./react-hook-form-CHgCpQZx.js";import{S as je}from"./react-select-BtlNMgc-.js";import{G as Je}from"./react-spinners-Ded03mSa.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-BphRFb1H.js";import"./use-sync-external-store-BO3I4ym4.js";import"./redux-DITMfSWq.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./idb-BXWtuYvb.js";import"./tslib-BGVaTf34.js";import"./@babel-CabbEptY.js";import"./@emotion-hvCLuaXR.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-YPZU7XtI.js";import"./@floating-ui-NvD4EidW.js";import"./use-isomorphic-layout-effect-BNVKFYaY.js";import"./memoize-one-BdPwpGay.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function a(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=a(s);fetch(s.href,n)}})();function ne({dialogToggle:t,type:r,config:a,onClose:i,onConfirmSave:s,onConfirmModify:n,onConfirmDelete:d,onConfirmJoin:N}){const[l,m]=o.useState(""),[j,x]=o.useState(!1);o.useEffect(()=>{t&&(x(!1),h())},[t]);const h=()=>{m(a.title||"알림")},g=()=>{switch(r){case"modify":return{backgroundColor:"#2196F3"};case"delete":case"error":return{backgroundColor:"#EF5350"};default:return{backgroundColor:"#CDDC39"}}},y=()=>{switch(x(!0),r){case"save":s();break;case"join":N();break;case"modify":n();break;case"delete":d();break}},f=()=>{switch(r){case"save":case"modify":return"✔";case"delete":return"🗑️";case"ok":return"✔️";case"join":return"✔️";case"error":return"❗️";default:return"ℹ️"}},p=()=>{switch(r){case"save":return"저장하시겠습니까?";case"modify":return"수정하시겠습니까?";case"delete":return"삭제하시겠습니까?";case"ok":return"정상처리되었습니다.";case"join":return"회원가입이 완료되었습니다.";case"error":return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"error-table-wrap",children:[e.jsx("h2",{children:"에러가 발생했습니다."}),e.jsxs("table",{className:"error-table",children:[e.jsxs("colgroup",{children:[e.jsx("col",{width:"100px"}),e.jsx("col",{width:"*"})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:"에러코드"}),e.jsx("td",{children:a.error.code})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:"에러내용"}),e.jsx("td",{dangerouslySetInnerHTML:{__html:a.error.message}})]})]})]})]})});case"customMessage":return e.jsx("h2",{dangerouslySetInnerHTML:{__html:a.custom.message}});default:return null}};return e.jsxs("div",{className:`dialog ${t?"open":""}`,children:[e.jsx("div",{className:"dialog-overlay",onClick:_=>_.stopPropagation()}),e.jsxs("div",{className:"dialog-content",onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{className:"dialog-header",style:g(),children:[e.jsx("h2",{children:l}),e.jsx("button",{className:"dialog-close",onClick:i,children:"x"})]}),e.jsx("div",{className:"dialog-body",children:e.jsxs("div",{className:"alert__message",children:[e.jsx("span",{className:"status-icon",children:f()}),e.jsx("div",{children:p()})]})}),e.jsx("div",{className:"dialog-actions",children:["save","modify","delete","join"].includes(r)?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"buttons buttons-secondary",disabled:j,onClick:i,children:"아니오"}),e.jsx("button",{className:"buttons buttons-primary",onClick:y,disabled:j,children:j?"처리 중...":"예"})]}):e.jsx("button",{className:"buttons buttons-primary",onClick:i,children:"확인"})})]})]})}const We=()=>{try{const t=localStorage.getItem("user");return t===null?null:JSON.parse(t)}catch{return null}},Xe={user:We()||null,error:null},ge=Ie({name:"auth",initialState:Xe,reducers:{signUpSuccess:(t,r)=>{t.user=r.payload,t.error=null,localStorage.setItem("user",JSON.stringify(r.payload))},signUpFailure:(t,r)=>{t.user=null,t.error=r.payload},loginSuccess:(t,r)=>{t.user=r.payload,t.error=null,localStorage.setItem("user",JSON.stringify(r.payload))},loginFailure:(t,r)=>{t.user=null,t.error=r.payload},logoutSuccess:t=>{t.user=null,t.error=null,localStorage.removeItem("user")},logoutFailure:(t,r)=>{t.user=null,t.error=r.payload}}}),{signUpSuccess:Ze,signUpFailure:Zs,loginSuccess:Ne,loginFailure:he,logoutSuccess:Be,logoutFailure:Bs}=ge.actions,$e=ge.reducer,He=()=>{const t={background:"white",color:"#98bb45"},r={background:"white",color:"#162cac"},{pathname:a}=me(),i=T(),s=se(),n=Fe("/author/detail/:id"),d=te(E=>E.auth.user),[N,l]=o.useState(!1),[m,j]=o.useState("customMessage"),[x,h]=o.useState({title:"",titleColor:"",error:{code:403,message:"not authentication"},custom:{icon:"mdi-check-circle-outline",message:"custom message"}}),g=()=>{l(!1)},y=()=>{g()},f=E=>{h(b=>({...b,custom:{...b.custom,message:E}})),l(!0)},p=()=>{s(Be()),i("/"),window.location.reload()},_=()=>{d===null?f("로그인 후 이용해주세요."):i("/author")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"homebar",children:e.jsxs("div",{className:"homebar-wrap",children:[e.jsx(A,{className:"homebar-wrap__item",to:"/",style:{textDecoration:"none"},children:e.jsx("div",{className:"homebar-wrap__logo",children:"JOARA"})}),e.jsx("div",{className:"homebar-wrap__item",onClick:_,children:e.jsx("div",{className:"homebar-wrap__menu",style:a==="/author"||a==="/author/list"||n?t:{},children:e.jsxs("div",{className:"homebar-wrap__icon",children:[e.jsx(Ee,{className:"icon",size:"20"}),"Author"]})})}),e.jsx(A,{to:"/novel",onClick:()=>f("Novel section is coming soon!"),className:"homebar-wrap__item",style:{textDecoration:"none"},children:e.jsx("div",{className:"homebar-wrap__novel",children:e.jsx("div",{className:"homebar-wrap__menu",style:a==="/novel"?t:{},children:e.jsxs("div",{className:"homebar-wrap__icon",children:[e.jsx(Oe,{className:"icon",size:"20"}),"Novel"]})})})}),d===null?e.jsx(A,{className:"homebar-wrap__item",to:"/login",style:{textDecoration:"none"},children:e.jsx("div",{className:"login-btn",children:e.jsx("div",{className:"homebar-wrap__menu",style:a==="/login"||a==="/signup"?r:{},children:e.jsxs("div",{className:"homebar-wrap__icon",children:[e.jsx(Te,{className:"icon",size:"20"}),"Login"]})})})}):e.jsx("div",{className:"homebar-wrap__item login-btn",children:e.jsx("div",{className:"homebar-wrap__menu",onClick:p,children:e.jsxs("div",{className:"homebar-wrap__icon",children:[e.jsx(Le,{className:"icon",size:"20"}),"Logout"]})})})]})}),e.jsx(ne,{type:m,dialogToggle:N,config:x,onClose:g,onConfirm:y})]})},Ye=()=>e.jsx("div",{className:"main-head",children:e.jsx("div",{className:"main-head__wrap",children:e.jsx("div",{className:"title",children:e.jsxs("div",{className:"title__item",children:[e.jsx("span",{children:"JOARA,"}),e.jsx("span",{children:"WEB"}),e.jsx("span",{children:"PLATFORM"})]})})})}),Ke=()=>(o.useEffect(()=>{ae.init()},[]),e.jsx("div",{className:"second-index",children:e.jsxs("div",{className:"second-index__wrap",children:[e.jsxs("div",{className:"second-index__content","data-aos":"fade-up","data-aos-delay":"300",children:[e.jsx("div",{className:"second-index__content__left",children:e.jsx("div",{className:"left-wrap",children:e.jsxs("div",{className:"left-wrap__text",children:[e.jsx("h1",{children:"띠링, 연재가 도착했습니다"}),e.jsxs("p",{children:["다양한 세계관, 장르소설 그리고 서브컬쳐 패러디까지!",e.jsx("br",{}),"조아라 모바일 앱으로도 웹소설을 편하게 즐기실 수 있어요"]})]})})}),e.jsxs("div",{className:"second-index__content__right",children:[e.jsx("img",{src:"/images/app/app_01.png"}),e.jsx("img",{src:"/images/app/app_02.png"}),e.jsx("img",{src:"/images/app/app_03.png"})]})]}),e.jsxs("div",{className:"second-index__content","data-aos":"fade-up","data-aos-delay":"300",children:[e.jsx("div",{className:"second-index__content__left",children:e.jsx("div",{className:"left-wrap",children:e.jsxs("div",{className:"left-wrap__text",children:[e.jsx("h1",{children:"뷰어 TTS, 텍스트 음성 변환"}),e.jsx("p",{children:"작가·독자의 보이스를 중심으로 필요한 변화를 선별하여 완전하게 새 단장 했습니다."})]})})}),e.jsxs("div",{className:"second-index__content__right",children:[e.jsx("img",{src:"/images/app/voice_01.png"}),e.jsx("img",{src:"/images/app/voice_02.png"}),e.jsx("img",{src:"/images/app/voice_03.png"})]})]}),e.jsxs("div",{className:"second-index__content","data-aos":"fade-up","data-aos-delay":"300",children:[e.jsx("div",{className:"second-index__content__left",children:e.jsx("div",{className:"left-wrap",children:e.jsxs("div",{className:"left-wrap__text",children:[e.jsx("h1",{children:"새로워진 사용 친화적 업데이트"}),e.jsxs("p",{children:["홈페이지·아이템샵 오픈, 프리미엄 선물함과 무료 이벤트, 작품 상세 페이지 개선",e.jsx("br",{}),"그리고 더욱 스마트해진 뷰어로 편하게 조아라를 이용하세요."]})]})})}),e.jsxs("div",{className:"second-index__content__right",children:[e.jsx("img",{src:"/images/app/update_01.png"}),e.jsx("img",{src:"/images/app/update_02.png"}),e.jsx("img",{src:"/images/app/update_03.png"})]})]}),e.jsxs("div",{className:"second-index__text",children:[e.jsx("span",{children:"GO TO THE NEXT PAGE FOR ENJOY "}),e.jsx("span",{children:"GO TO THE NEXT PAGE FOR ENJOY "}),e.jsx("span",{children:"GO TO THE NEXT PAGE FOR ENJOY "}),e.jsx("span",{children:"GO TO THE NEXT PAGE FOR ENJOY "}),e.jsx("span",{children:"GO TO THE NEXT PAGE FOR ENJOY "}),e.jsx("span",{children:"GO TO THE NEXT PAGE FOR ENJOY "})]})]})})),fe=({onClick:t})=>e.jsx("button",{className:"button","data-aos":"fade-up",onClick:t,children:"LET`S GO"}),Qe=()=>{const t="https://www.joara.com/main/shortcut/recommend/contest";return o.useEffect(()=>{ae.init()},[]),e.jsx("div",{className:"third-index",children:e.jsxs("div",{className:"third-index__wrap",children:[e.jsx("div",{className:"third-index__title",children:e.jsx("span",{"data-aos":"fade-up",children:"CONTENT"})}),e.jsxs("div",{className:"third-index__content","data-aos":"fade-up","data-aos-delay":"200",children:[e.jsx("div",{className:"third-index__content__left"}),e.jsx("div",{className:"third-index__content__right",children:e.jsx("div",{className:"left-wrap",children:e.jsxs("div",{className:"left-wrap__text",children:[e.jsxs("h1",{children:["77페스티벌",e.jsx("br",{})," 웹소설 공모전"]}),e.jsxs("p",{children:["웹소설의 기원, 조아라! ",e.jsx("br",{}),'"55만종 이상의 소설, 800만편의 연재" ',e.jsx("br",{}),"신인, 기성작가 상관없이 누구나 신청 가능한 ",e.jsx("br",{}),"조아라만의 웹소설 공모전이 개최됩니다.",e.jsx("br",{}),"자신의 상상력을 발휘하여 자유롭게 도전해보세요. ",e.jsx("br",{})]}),e.jsx(fe,{onClick:()=>window.open(t,"_blank")})]})})})]})]})})},es=()=>{const t="https://www.joara.com/main/recommend";return o.useEffect(()=>{ae.init()},[]),e.jsx("div",{className:"fourth-index",children:e.jsxs("div",{className:"fourth-index__wrap",children:[e.jsxs("div",{className:"fourth-index__text",children:[e.jsxs("p",{children:[e.jsx("span",{children:"JOARA"})," : NOVEL·COMIX·EVENT "]}),e.jsxs("p",{children:[e.jsx("span",{children:"JOARA"})," : NOVEL·COMIX·EVENT "]}),e.jsxs("p",{children:[e.jsx("span",{children:"JOARA"})," : NOVEL·COMIX·EVENT "]}),e.jsxs("p",{children:[e.jsx("span",{children:"JOARA"})," : NOVEL·COMIX·EVENT "]}),e.jsxs("p",{children:[e.jsx("span",{children:"JOARA"})," : NOVEL·COMIX·EVENT "]}),e.jsxs("p",{children:[e.jsx("span",{children:"JOARA"})," : NOVEL·COMIX·EVENT "]})]}),e.jsx("div",{className:"fourth-index__title",children:e.jsxs("p",{"data-aos":"fade-up",children:["트렌디 인기 신작, 연재, 완결, BL, 만화, 소설까지",e.jsx("br",{}),"다양한 작품을 조아라 한 곳에서 즐기세요.",e.jsx("br",{}),e.jsx("span",{children:"스토리 본능"}),"을 깨우다."]})}),e.jsx("div",{className:"fourth-index__bike","data-aos":"fade-left",children:e.jsx("img",{src:"https://eoskandlv.github.io/modi_admin/images/book.png"})}),e.jsx("div",{className:"fourth-index__bottom",children:e.jsxs("div",{className:"fourth-index__bottom__content",children:[e.jsx("h1",{"data-aos":"fade-up",children:"지금 바로 조아라와 함께해 보세요!"}),e.jsx("p",{"data-aos":"fade-up",children:"웹소설의 시작 조아라에서 매일 업데이트 되는 무료 웹소설과 웹툰을 취향에 맞게 즐겨보세요."}),e.jsx(fe,{onClick:()=>window.open(t,"_blank")})]})})]})})},ss=()=>e.jsxs(e.Fragment,{children:[e.jsx(Ye,{}),e.jsx(Ke,{}),e.jsx(Qe,{}),e.jsx(es,{})]}),I=({type:t,colorType:r,onClick:a})=>{const i=()=>{switch(r){case"save":return{backgroundColor:"#98bb45"};case"list":return{backgroundColor:"#f1c83e"};case"delete":return{backgroundColor:"#EF5350"};default:return{backgroundColor:"#162cac"}}},s=()=>{switch(r){case"save":return"등록";case"modify":return"수정";case"delete":return"삭제";case"list":return"목록"}};return e.jsx(e.Fragment,{children:e.jsx("button",{className:"button__actions",style:i(),onClick:a,children:s()})})},X={apiKey:"AIzaSyBR8XRCvZ1KaEq6VdvtSMbGD4f-SuTIjI0",authDomain:"writer-management-6ff9c.firebaseapp.com",projectId:"writer-management-6ff9c",storageBucket:"writer-management-6ff9c.appspot.com",messagingSenderId:"970675701644",appId:"1:970675701644:web:fa2f019ae1e00304b1b8a9",measurementId:"G-FEYF944X02"},oe=z(X);J(oe);xe(oe);const ts=z(X),ye=()=>{const t=T(),[r,a]=o.useState([]),[i,s]=o.useState("loading"),n=async()=>{const l=J(ts),m=await pe(re(l,"product"));m.forEach(x=>{});const j=m.docs.map(x=>({id:x.id,...x.data()}));j.length==0?s("empty"):(s("loading"),s("ok")),a(j)};o.useEffect(()=>{n()},[]);const d=()=>{t("/author")},N=l=>{r.forEach(m=>{m.id==l&&t(`/author/detail/${l}`)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"author-wrap",children:e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"contents-head",children:e.jsx("h2",{children:"작품 목록"})}),e.jsxs("div",{className:"contents-body test",children:[e.jsx("div",{className:"table__wrap",children:e.jsxs("table",{className:"contents-table",children:[e.jsxs("colgroup",{children:[e.jsx("col",{width:"*"}),e.jsx("col",{width:"10%"}),e.jsx("col",{width:"10%"}),e.jsx("col",{width:"10%"}),e.jsx("col",{width:"10%"})]}),e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"제목"}),e.jsx("th",{children:"이름"}),e.jsx("th",{children:"작품종류"}),e.jsx("th",{children:"카테고리"}),e.jsx("th",{children:"코멘트"})]})}),e.jsxs("tbody",{children:[i==="empty"&&e.jsx("tr",{className:"table-basic__empty",children:e.jsx("td",{colSpan:"6",children:e.jsx("div",{children:e.jsx("h3",{children:"등록된 데이터가 없습니다."})})})}),i==="loading"&&e.jsx("tr",{className:"table-basic__loading",children:e.jsx("td",{colSpan:"6",children:e.jsxs("div",{className:"progress",children:[e.jsx("div",{className:"loading"}),e.jsx("p",{children:"데이터를 불러오는 중입니다."})]})})}),i==="ok"&&r.map((l,m)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:e.jsx("a",{onClick:()=>N(l.id),children:l.title})}),e.jsx("td",{className:"text-center",children:l.name}),e.jsx("td",{className:"text-center",children:l.sort=="COMMON"?"일반":"습작"}),e.jsx("td",{className:"text-center",children:l.category.label}),e.jsx("td",{className:"text-center",children:l.comment=="ALLOW"?"허용":"비허용"})]},m))]})]})}),e.jsx("div",{className:"save-button",onClick:d,children:e.jsx(I,{colorType:"save"})})]})]})})})},ve=o.createContext({}),S=({value:t,name:r,defaultChecked:a,disabled:i})=>{const s=o.useContext(ve);return e.jsx(e.Fragment,{children:e.jsx("label",{children:e.jsx("input",{type:"radio",value:t,name:r,defaultChecked:a,disabled:i||s.disabled,checked:s.value!==void 0?t===s.value:void 0,onChange:n=>s.onChange&&s.onChange(n.target.value),className:"radio-input"})})})},U=({label:t,children:r,...a})=>e.jsx(e.Fragment,{children:e.jsxs("fieldset",{className:"radio-container",children:[e.jsx("legend",{children:t}),e.jsx(ve.Provider,{value:a,children:r})]})}),as=z(X),rs=J(as),ns=({})=>{var q,M,R,V;const{register:t,handleSubmit:r,setValue:a,watch:i,formState:{errors:s}}=W({mode:"onChange"}),n=T(),[d,N]=o.useState(null),[l,m]=o.useState("COMMON"),[j,x]=o.useState("ALLOW"),h=te(u=>u.auth.user),[g,y]=o.useState(h.username||""),[f,p]=o.useState(!1),[_,E]=o.useState("save"),[b,Z]=o.useState({title:"",titleColor:"",error:{code:403,message:"not authentication"},custom:{icon:"mdi-check-circle-outline",message:"custom message"}}),D=async u=>{await Me(re(rs,"product"),{name:u.useName,category:u.selectCategory,sort:u.workType,title:u.titleName,introduce:u.workDescription,content:u.workContents,comment:u.commentValue})},B=u=>{m(u),a("workType",u)},F=[{value:"fantasy",label:"판타지"},{value:"romance",label:"로맨스"},{value:"poetry",label:"시"},{value:"fear",label:"공포"}],[w,ie]=o.useState(F[0]),$=u=>{a("selectCategory",u)};o.useEffect(()=>{a("selectCategory",w)},[a,w]);const O=u=>{x(u),a("commentValue",u)};o.useEffect(()=>{a("useName",g)},[a,g]);const P=u=>{N(u),p(!0)},le=async()=>{d&&(await D(d),n("/author/list")),p(!1)},H=()=>{p(!1)},Y=()=>{n("/author/list")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"contents-head",children:e.jsx("h2",{children:"작품 등록"})}),e.jsx("div",{className:"contents-body test",children:e.jsx("div",{className:"table__wrap",children:e.jsxs("form",{onSubmit:r(P),children:[e.jsxs("table",{className:"contents-table table-style-01",children:[e.jsxs("colgroup",{children:[e.jsx("col",{width:"20%"}),e.jsx("col",{width:"*"})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"이름"}),e.jsx("td",{children:e.jsx("div",{className:"table-group",children:e.jsx("input",{className:"table-group__input",disabled:!0,...t("useName",{required:!0}),value:g})})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"작품종류"}),e.jsx("td",{children:e.jsxs("div",{className:"radio-group",children:[e.jsxs(U,{value:l,onChange:B,children:[e.jsx(S,{value:"COMMON"}),"일반",e.jsx(S,{value:"ETUDE"}),"습작"]}),e.jsx("input",{type:"hidden",...t("workType",{required:!0}),value:l})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"카테고리"}),e.jsxs("td",{children:[e.jsx("div",{className:"select-group ",children:e.jsx(je,{options:F,onChange:$,defaultValue:F[0]})}),e.jsx("input",{type:"hidden",...t("selectCategory",{required:!0})})]})]}),e.jsxs("tr",{children:[e.jsxs("td",{children:["작품명",e.jsx("span",{className:"essential",children:"*"})]}),e.jsx("td",{children:e.jsxs("div",{className:"table-group",children:[s.titleName&&((q=s.titleName)==null?void 0:q.type)==="required"&&e.jsx("span",{children:"* 작품명을 입력해주세요."}),s.titleName&&((M=s.titleName)==null?void 0:M.type)==="maxLength"&&e.jsx("span",{children:s.titleName.message}),e.jsx("input",{type:"text",className:"table-group__input",placeholder:"작품명은 40자 이내로 작성해주세요.",style:{borderColor:s.titleName?"#ff0000":"#dadada"},...t("titleName",{required:!0,maxLength:{value:40,message:"* 작품명은 40자 이내로 작성해주세요."},onChange:u=>{const{value:L}=u.target;L.length>40&&(u.target.value=L.slice(0,40))}})})]})})]}),e.jsxs("tr",{children:[e.jsxs("td",{children:["작품소개",e.jsx("span",{className:"essential",children:"*"})]}),e.jsx("td",{children:e.jsxs("div",{className:"table-group",children:[s.workContents&&((R=s.workContents)==null?void 0:R.type)==="required"&&e.jsx("span",{children:"* 작품 줄거리를 입력하세요."}),e.jsx("textarea",{type:"text",className:"table-group__input table-group__textarea",placeholder:"작품 줄거리를 입력하세요.",style:{borderColor:s.workContents?"#ff0000":"#dadada"},...t("workContents",{required:!0})})]})})]}),e.jsxs("tr",{children:[e.jsxs("td",{children:["작품내용",e.jsx("span",{className:"essential",children:"*"})]}),e.jsx("td",{children:e.jsxs("div",{className:"table-group",children:[s.workDescription&&((V=s.workDescription)==null?void 0:V.type)==="required"&&e.jsx("span",{children:"* 작품 내용을 입력하세요."}),e.jsx("textarea",{type:"text",className:"table-group__input table-group__textarea",placeholder:"작품 내용을 입력하세요.",style:{borderColor:s.workDescription?"#ff0000":"#dadada"},...t("workDescription",{required:!0})})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"코멘트 허용"}),e.jsxs("td",{children:[e.jsx("div",{className:"radio-group",children:e.jsxs(U,{value:j,onChange:O,children:[e.jsx(S,{value:"ALLOW"}),"허용",e.jsx(S,{value:"REJECT"}),"비허용"]})}),e.jsx("input",{type:"hidden",...t("commentValue",{required:!0}),value:j})]})]})]})]}),e.jsxs("div",{className:"save-button",children:[e.jsx(I,{colorType:"list",onClick:Y}),e.jsx(I,{type:"submit",colorType:"save"})]})]})})})]}),e.jsx(ne,{type:_,dialogToggle:f,config:b,onClose:H,onConfirmSave:le})]})},os=({loading:t})=>{if(t==!0)return e.jsx("div",{className:"spinner",children:e.jsx(Je,{color:"#ffffff",loading:t,size:25,speedMultiplier:.8,margin:5})})},is=z(X),K=J(is),be=({})=>{var u,L,ce,de;const{register:t,handleSubmit:r,setValue:a,watch:i,control:s,formState:{errors:n}}=W({mode:"onChange"}),d=T(),[N,l]=o.useState(!0),[m,j]=o.useState(null),[x,h]=o.useState("COMMON"),[g,y]=o.useState("ALLOW"),f=te(c=>c.auth.user),[p,_]=o.useState(f.username||""),[E,b]=o.useState(!1),[Z,D]=o.useState("modify"),[B,F]=o.useState({title:"",titleColor:"",error:{code:403,message:"not authentication"},custom:{icon:"mdi-check-circle-outline",message:"custom message"}}),{id:w}=Pe(),ie=async c=>{const C=ue(K,"product",w);await Ve(C,{name:c.useName,category:c.selectCategory,sort:c.workType,title:c.titleName,introduce:c.workDescription,content:c.workContents,comment:c.commentValue})},$=c=>{h(c),a("workType",c)},O=[{value:"fantasy",label:"판타지"},{value:"romance",label:"로맨스"},{value:"poetry",label:"시"},{value:"fear",label:"공포"}],[P,le]=o.useState(O[0]);o.useEffect(()=>{a("selectCategory",P.value)},[a,P]);const H=c=>{y(c),a("commentValue",c)};o.useEffect(()=>{a("useName",p)},[a,p]);const Y=c=>{Z=="modify"&&j(c),b(!0)},q=async()=>{m&&(await ie(m),l(!1),d("/author/list")),b(!1)},M=()=>{b(!1)},R=async()=>{const c=await pe(re(K,"product"));let C=[],v=null;c.forEach(G=>{G.id===w&&(v=G.data()),C.push({id:G.id,...G.data()})}),v&&(a("titleName",v.title),a("workType",v.sort||"COMMON"),h(v.sort||"COMMON"),a("selectCategory",v.category||O[0]),a("workDescription",v.introduce),a("workContents",v.content),a("commentValue",v.comment||"ALLOW"),y(v.comment||"ALLOW")),l(!1)};o.useEffect(()=>{R()},[w]),o.useEffect(()=>{a("workType",x)},[x,a]);const V=async()=>{const c=ue(K,"product",w);await Re(c),console.log("Document deleted",w),d("/author/list")};return e.jsxs(e.Fragment,{children:[e.jsx(os,{loading:N}),e.jsx("div",{className:"author-wrap",children:e.jsxs("div",{className:"contents",children:[e.jsx("div",{className:"contents-head",children:e.jsx("h2",{children:"작품 상세"})}),e.jsx("div",{className:"contents-body test",children:e.jsx("div",{className:"table__wrap",children:e.jsxs("form",{onSubmit:r(Y),children:[e.jsxs("table",{className:"contents-table table-style-01",children:[e.jsxs("colgroup",{children:[e.jsx("col",{width:"20%"}),e.jsx("col",{width:"*"})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"이름"}),e.jsx("td",{children:e.jsx("div",{className:"table-group",children:e.jsx("input",{className:"table-group__input",disabled:!0,...t("useName",{required:!0}),value:p})})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"작품종류"}),e.jsx("td",{children:e.jsxs("div",{className:"radio-group",children:[e.jsxs(U,{value:x,onChange:$,children:[e.jsx(S,{value:"COMMON"}),"일반",e.jsx(S,{value:"ETUDE"}),"습작"]}),e.jsx("input",{type:"hidden",...t("workType",{required:!0}),value:x})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"카테고리"}),e.jsxs("td",{children:[e.jsx(ze,{name:"selectCategory",control:s,defaultValue:O[0],render:({field:c})=>e.jsx(je,{...c,options:O,onChange:C=>{c.onChange(C)}})}),e.jsx("input",{type:"hidden",...t("selectCategory",{required:!0})})]})]}),e.jsxs("tr",{children:[e.jsxs("td",{children:["작품명",e.jsx("span",{className:"essential",children:"*"})]}),e.jsx("td",{children:e.jsxs("div",{className:"table-group",children:[n.titleName&&((u=n.titleName)==null?void 0:u.type)==="required"&&e.jsx("span",{children:"* 작품명을 입력해주세요."}),n.titleName&&((L=n.titleName)==null?void 0:L.type)==="maxLength"&&e.jsx("span",{children:n.titleName.message}),e.jsx("input",{type:"text",className:"table-group__input",placeholder:"작품명은 40자 이내로 작성해주세요.",style:{borderColor:n.titleName?"#ff0000":"#dadada"},...t("titleName",{required:!0,maxLength:{value:40,message:"* 작품명은 40자 이내로 작성해주세요."},onChange:c=>{const{value:C}=c.target;C.length>40&&(c.target.value=C.slice(0,40))}})})]})})]}),e.jsxs("tr",{children:[e.jsxs("td",{children:["작품소개",e.jsx("span",{className:"essential",children:"*"})]}),e.jsx("td",{children:e.jsxs("div",{className:"table-group",children:[n.workContents&&((ce=n.workContents)==null?void 0:ce.type)==="required"&&e.jsx("span",{children:"* 작품 줄거리를 입력하세요."}),e.jsx("textarea",{type:"text",className:"table-group__input table-group__textarea",placeholder:"작품 줄거리를 입력하세요.",style:{borderColor:n.workContents?"#ff0000":"#dadada"},...t("workContents",{required:!0})})]})})]}),e.jsxs("tr",{children:[e.jsxs("td",{children:["작품내용",e.jsx("span",{className:"essential",children:"*"})]}),e.jsx("td",{children:e.jsxs("div",{className:"table-group",children:[n.workDescription&&((de=n.workDescription)==null?void 0:de.type)==="required"&&e.jsx("span",{children:"* 작품 내용을 입력하세요."}),e.jsx("textarea",{type:"text",className:"table-group__input table-group__textarea",placeholder:"작품 내용을 입력하세요.",style:{borderColor:n.workDescription?"#ff0000":"#dadada"},...t("workDescription",{required:!0})})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"코멘트 허용"}),e.jsxs("td",{children:[e.jsx("div",{className:"radio-group",children:e.jsxs(U,{value:g,onChange:H,children:[e.jsx(S,{value:"ALLOW"}),"허용",e.jsx(S,{value:"REJECT"}),"비허용"]})}),e.jsx("input",{type:"hidden",...t("commentValue",{required:!0}),value:g})]})]})]})]}),e.jsxs("div",{className:"save-button",children:[e.jsx(I,{type:"submit",colorType:"delete",onClick:()=>D("delete")}),e.jsx(I,{type:"submit",colorType:"modify",onClick:()=>D("modify")})]})]})})})]})}),e.jsx(ne,{type:Z,dialogToggle:E,config:B,onClose:M,onConfirmModify:q,onConfirmDelete:V})]})},ls=()=>{const t=window.location.pathname;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"author-wrap",children:[t==="/author/list"&&e.jsx(ye,{}),t==="/author"&&e.jsx(ns,{}),t==="/author/detail/:id"&&e.jsx(be,{})]})})},_e=xe(oe),we="SIGN_UP_SUCCESS",Q="SIGN_UP_FAILURE",cs=(t,r,a,i)=>async s=>{try{await Ge(_e,t,r,a,i);const n={type:we,email:t,password:r,username:a,nickname:i};return s(n),n}catch(n){let d;return n.code==="auth/email-already-in-use"?d={type:Q,payload:"이미 사용중인 이메일입니다."}:(console.error("Error signing up:",n),d={type:Q,payload:n.message}),s(d),d}},Ce="LOGIN_SUCCESS",ee="LOGIN_FAILURE",ds=(t,r)=>async a=>{try{await Ue(_e,t,r);const i={type:Ce,email:t,password:r};return a(Ne(i)),i}catch(i){let s;return i.code==="auth/invalid-credential"?s={type:ee,payload:"이메일, 비밀번호를 확인해주세요"}:(console.error("Error signing up:",i),s={type:ee,payload:i.message}),a(s),s}},us=()=>{var l,m,j;const{register:t,handleSubmit:r,setValue:a,watch:i,formState:{errors:s}}=W({mode:"onChange"}),n=se(),d=T(),N=async x=>{try{const h=await n(ds(x.loginId,x.loginPassword));h&&h.type===Ce?(n(Ne(h)),alert("로그인이 완료되었습니다."),d("/")):h&&h.type===ee&&(n(he(h)),alert("로그인 실패: "+h.payload))}catch(h){console.log(h),n(he({message:h.message}))}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsxs("form",{onSubmit:r(N),children:[e.jsx("h1",{children:"Login"}),e.jsx("input",{type:"text",placeholder:"ID",style:{borderColor:s.loginId?"#ff0000":"#dadada"},...t("loginId",{required:!0,pattern:{value:/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,message:"유효한 이메일 주소를 입력하세요."}})}),s.loginId&&((l=s.loginId)==null?void 0:l.type)==="required"&&e.jsx("span",{children:"아이디를 입력하세요."}),s.loginId&&e.jsx("span",{children:s.loginId.message}),e.jsx("input",{type:"password",placeholder:"Password",style:{borderColor:s.loginPassword?"#ff0000":"#dadada"},...t("loginPassword",{required:!0,minLength:{value:6,message:"비밀번호는 6자 이상입니다."}})}),s.loginPassword&&((m=s.loginPassword)==null?void 0:m.type)==="required"&&e.jsx("span",{children:"비밀번호를 입력하세요."}),s.loginPassword&&((j=s.loginPassword)==null?void 0:j.type)==="minLength"&&e.jsx("span",{children:s.loginPassword.message}),e.jsx("input",{className:"btn",type:"submit",value:"Log in"}),e.jsx(A,{to:"/signup",children:"sign up?"})]})})})},hs=()=>e.jsx(e.Fragment,{children:e.jsx(us,{})}),ms=()=>{var l,m,j,x,h,g,y;const{register:t,handleSubmit:r,setValue:a,watch:i,formState:{errors:s}}=W({mode:"onChange"}),n=T(),d=se(),N=async f=>{try{const p=await d(cs(f.emailId,f.password,f.userName,f.nickname));p&&p.type===we?(d(Ze(p)),alert("회원가입을 축하드립니다."),n("/")):p&&p.type===Q&&alert(p.payload)}catch(p){throw p}};return e.jsx("div",{className:"container",children:e.jsxs("form",{onSubmit:r(N),children:[e.jsx("h1",{children:"Sign Up"}),e.jsx("input",{type:"text",placeholder:"email ID",style:{borderColor:s.emailId?"#ff0000":"#dadada"},...t("emailId",{required:!0,pattern:{value:/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,message:"유효한 이메일 주소를 입력하세요."}})}),s.emailId&&((l=s.emailId)==null?void 0:l.type)==="required"&&e.jsx("span",{children:"아이디를 입력하세요."}),s.emailId&&e.jsx("span",{children:s.emailId.message}),e.jsx("input",{type:"password",placeholder:"Password",style:{borderColor:s.password?"#ff0000":"#dadada"},...t("password",{required:!0,minLength:{value:6,message:"비밀번호는 6자 이상입니다."}})}),s.password&&((m=s.password)==null?void 0:m.type)==="required"&&e.jsx("span",{children:"비밀번호를 입력하세요."}),s.password&&((j=s.password)==null?void 0:j.type)==="minLength"&&e.jsx("span",{children:s.password.message}),e.jsx("input",{type:"text",placeholder:"your name",style:{borderColor:s.userName?"#ff0000":"#dadada"},...t("userName",{required:!0,pattern:{value:/^[a-zA-Z0-9ㄱ-ㅎㅏ-ㅣ가-힣\s]+$/,message:"이름에는 특수문자가 포함될 수 없습니다."}})}),s.userName&&((x=s.userName)==null?void 0:x.type)==="required"&&e.jsx("span",{children:"이름을 입력하세요."}),s.userName&&((h=s.userName)==null?void 0:h.type)==="pattern"&&e.jsx("span",{children:s.userName.message}),e.jsx("input",{type:"text",placeholder:"nickname",style:{borderColor:s.nickName?"#ff0000":"#dadada"},...t("nickName",{required:!0,pattern:{value:/^[a-zA-Z0-9ㄱ-ㅎㅏ-ㅣ가-힣\s]+$/,message:"닉네임에는 특수문자가 포함될 수 없습니다."}})}),s.nickName&&((g=s.nickName)==null?void 0:g.type)==="required"&&e.jsx("span",{children:"닉네임을 입력하세요."}),s.nickName&&((y=s.nickName)==null?void 0:y.type)==="pattern"&&e.jsx("span",{children:s.nickName.message}),e.jsx("input",{className:"btn",type:"submit",value:"Sign up"}),e.jsx(A,{to:"/login",children:"Log in?"})]})})},xs=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"Preparing-content",children:e.jsx("img",{src:"./images/404_img.png"})})}),ps=({children:t})=>{const r=me();return o.useEffect(()=>{window.scrollTo(0,0)},[r]),t};function js(){return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx(He,{id:"app"}),e.jsx(ps,{children:e.jsxs(qe,{className:"user-view-guard",children:[e.jsx(k,{path:"/",element:e.jsx(ss,{})}),e.jsx(k,{path:"/author",element:e.jsx(ls,{})}),e.jsx(k,{path:"/novel",element:e.jsx(xs,{})}),e.jsx(k,{path:"/login",element:e.jsx(hs,{})}),e.jsx(k,{path:"/signup",element:e.jsx(ms,{})}),e.jsx(k,{path:"/author/list",element:e.jsx(ye,{})}),e.jsx(k,{path:"/author/detail/:id",element:e.jsx(be,{})})]})})]})})}const gs=De({reducer:{auth:$e}});Se(document.getElementById("root")).render(e.jsx(Ae,{store:gs,children:e.jsx(ke,{children:e.jsx(js,{})})}));
